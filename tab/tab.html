S<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>选项卡</title>
    <link rel="stylesheet" type="text/css" href="http://cdn.bootcss.com/normalize/3.0.3/normalize.min.css">
    <style>
        #tab {
            width: 400px;
            margin: 100px auto 0;
        }

        #tab button {
            float: left;
            width: 100px;
            margin: 0;
            border-bottom: 0;
            border-left: 0;
            outline: 0;
        }


        #tab div {
            display: none;
            width: 400px;
            height: 150px;
            padding-top: 50px;
            border-bottom-left-radius: 8px;
            border-bottom-right-radius: 8px;
            text-align: center;
            background-color: #999999;
        }

        #tab .active {
            background-color: #999999;
        }
    </style>
</head>
<body>
    <div id="tab">
        <button>tab1</button>
        <button>tab2</button>
        <button>tab3</button>
        <button>tab4</button>
        <div>This is tab1</div>
        <div>This is tab2</div>
        <div>This is tab3</div>
        <div>This is tab4</div>
    </div>
    <script>
        (function() {
            function Tab(opts) {
                this.button = opts.btnSel || 'button';
                this.activeClass = opts.activeClass || 'active';
                this.tab = document.getElementById(opts.id || 'tab');
                this.tabBtn = this.tab.getElementsByTagName(this.button);
                this.tabCon = this.tab.getElementsByTagName(opts.conSel || 'div');
                // 切换选项卡时调用的函数
                if (opts.afterShow instanceof Function) {
                    this.afterShow = opts.afterShow;
                }
                this.init();
            }

            Tab.prototype = {
                // 初始化
                init: function() {
                    // 默认显示第一个标签
                    this.tabBtn[0].className += this.activeClass;
                    this.tabCon[0].style.display = 'block';
                    // 为按钮添加索引
                    for(var i = 0; i < this.tabBtn.length; i++) {
                       this.tabBtn[i].index = i;
                   }
                   this._bindEvent();
                },

                // 为选项卡绑定点击事件
                _bindEvent: function() {
                    var self = this;
                    this.tab.addEventListener('click', function(ev) {
                        var oEvent = ev || event;
                        var target = oEvent.target || oEvent.srcElement;
                        self.showTab(target);
                    })
                },

                // 切换选项卡
                showTab: function(target) {
                    if (target.nodeName.toLowerCase() === this.button && target.className.indexOf(this.activeClass) === -1) {
                        for ( i = 0; i < this.tabBtn.length; i++) {
                            if (this.tabBtn[i].className.indexOf(this.activeClass) !== -1) {
                                this.tabBtn[i].className = this.tabBtn[i].className.replace(this.activeClass, '');
                                this.tabCon[i].style.display = 'none';
                            }
                        }
                        target.className += this.activeClass;
                        this.tabCon[target.index].style.display = 'block';
                        if (this.afterShow) {
                            this.afterShow(target.index);
                        }
                    }
                }

                // // 销毁组件
                // destroy: function() {
                //     // 解除事件绑定
                //     // 删除DOM节点
                // }
            };

            var options = {
                id: 'tab',
                btnSel: 'button',
                conSel: 'div',
                activeClass: 'active',
                afterShow: function(index) {
                    console.log('show' + index);
                }
            };

            // 创建组件
            var tab = new Tab(options);
            // 调用方法
            // tab.showTab(document.getElementsByTagName('button')[3]);
        })();
    </script>
</body>
</html>
